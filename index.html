<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MolecularWeight Pro | Chemical Analysis</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&family=Roboto+Mono:wght@400;500&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="background-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <main class="app-container">
        <header>
            <h1>MolecularWeight<span>Pro</span></h1>
            <p>Precise molecular mass calculation & chemical lookup</p>
            <p>Brought to you by MiMe vibecoding dept.</p>
        </header>

        <nav class="view-switcher">
            <button id="showMwView" class="active">MW Calculator</button>
            <button id="showBufferView">Buffer Calculator</button>
            <button id="showDilutionView">Dilution Calculator</button>
        </nav>

        <section id="mwView" class="view-container">
            <section class="search-section">
                <div class="search-bar">
                    <input type="text" id="chemicalInput"
                        placeholder="Enter formula (e.g., H2O) or name (e.g., ethyl acetate)" autocomplete="off">
                    <button id="calculateBtn">Calculate</button>
                </div>
                <div id="errorMessage" class="error-message hidden"></div>
            </section>

            <section id="resultsSection" class="results-section hidden">
                <div class="result-card main-result">
                    <div class="result-label">Molecular Weight</div>
                    <div class="result-value"><span id="mwValue">0.00</span><span class="unit">g/mol</span></div>
                    <div class="chemical-info">
                        <span id="formulaDisplay" class="formula"></span>
                        <span id="nameDisplay" class="name"></span>
                    </div>
                    <div id="solubilityDisplay" class="solubility-info hidden"></div>
                    <div id="imageContainer" class="image-container hidden">
                        <img id="chemicalImage" src="" alt="Chemical structure">
                    </div>
                    <div id="synonymsDisplay" class="synonyms hidden"></div>
                </div>

                <div class="details-grid">
                    <div class="result-card component-breakdown">
                        <h3>Mass Composition</h3>
                        <div id="compositionList" class="composition-list">
                            <!-- Items will be injected here -->
                        </div>
                    </div>

                    <div class="result-card element-table">
                        <h3>Element Details</h3>
                        <div class="table-wrapper">
                            <table id="elementTable">
                                <thead>
                                    <tr>
                                        <th>Element</th>
                                        <th>Count</th>
                                        <th>Mass %</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Rows will be injected here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <section class="history-section">
                <h3>Recent Calculations</h3>
                <div id="historyList" class="history-list">
                    <!-- History items -->
                </div>
            </section>
        </section>

        <section id="bufferView" class="view-container hidden">
            <div class="result-card buffer-settings">
                <div class="buffer-header">
                    <h3>Final Solution Volume</h3>
                    <div class="volume-input-group">
                        <input type="number" id="solutionVolume" value="100" min="0">
                        <select id="volumeUnit">
                            <option value="ŒºL">ŒºL</option>
                            <option value="mL" selected>mL</option>
                            <option value="L">L</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="result-card solute-card">
                <div class="solutes-header">
                    <h3>Solutes</h3>
                    <div class="header-actions">
                        <button id="clearRecipeBtn" class="secondary-btn danger-btn">‚ö†Ô∏è Clear Recipe</button>
                        <button id="addSoluteBtn" class="secondary-btn">+ Add Solute</button>
                    </div>
                </div>
                <div class="table-wrapper">
                    <table class="solute-table">
                        <thead>
                            <tr>
                                <th>Chemical</th>
                                <th>Formula</th>
                                <th>MW</th>
                                <th>Concentration</th>
                                <th>Required Amount</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="soluteContainer">
                            <!-- Solute rows will be injected here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="dilutionView" class="view-container hidden">
            <div class="result-card buffer-settings">
                <h3>Calculations</h3> <!-- Header consistency -->
                <div class="dilution-grid">
                    <!-- Stock Solution -->
                    <div class="dilution-group">
                        <h4>Stock Solution (Start)</h4>
                        <div class="input-row">
                            <label>Chemical</label>
                            <div class="chem-input-group">
                                <button class="lookup-btn" id="dilutionLookupBtn" title="Open PubChem Entry">üîç</button>
                                <input type="text" id="dilutionChemName" class="chem-name"
                                    placeholder="Name (for MW lookup)">
                            </div>
                        </div>
                        <div class="input-row result-value-sm" style="margin-top:0.5rem">
                            <span id="dilutionFormulaDisplay" class="formula-badge"
                                style="display:none;margin-right:0.5rem;"></span>
                            <span id="dilutionMWDisplay" class="unit"
                                style="font-size: 0.9rem; color: var(--text-dim);">MW: -</span>
                        </div>

                        <div class="input-row" style="margin-top:1rem">
                            <label>Concentration</label>
                            <div class="measure-input-group">
                                <input type="number" id="c1Input" placeholder="C1">
                                <select id="c1Unit">
                                    <option value="M">M</option>
                                    <option value="mM">mM</option>
                                    <option value="ŒºM">ŒºM</option>
                                    <option value="Œºg/mL">Œºg/mL</option>
                                    <option value="mg/mL">mg/mL</option>
                                    <option value="mg/L">mg/L</option>
                                    <option value="g/L">g/L</option>
                                    <option value="pct">%</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Target Solution -->
                    <div class="dilution-group">
                        <h4>Target Solution (End)</h4>
                        <div class="input-row">
                            <label>Desired Conc.</label>
                            <div class="measure-input-group">
                                <input type="number" id="c2Input" placeholder="C2">
                                <select id="c2Unit">
                                    <option value="M">M</option>
                                    <option value="mM">mM</option>
                                    <option value="ŒºM">ŒºM</option>
                                    <option value="Œºg/mL">Œºg/mL</option>
                                    <option value="mg/mL">mg/mL</option>
                                    <option value="mg/L">mg/L</option>
                                    <option value="g/L">g/L</option>
                                    <option value="pct">%</option>
                                </select>
                            </div>
                        </div>

                        <div class="input-row" style="margin-top:1rem">
                            <label>Final Volume</label>
                            <div class="measure-input-group">
                                <input type="number" id="v2Input" placeholder="V2">
                                <select id="v2Unit">
                                    <option value="ŒºL">ŒºL</option>
                                    <option value="mL" selected>mL</option>
                                    <option value="L">L</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="result-card main-result" id="dilutionResultCard">
                <div class="result-label">To prepare the solution</div>
                <div class="dilution-instruction">
                    Add <span id="v1Result" class="highlight-val">-</span> of Stock
                    <br>to <span id="solventResult" class="highlight-val">-</span> of Solvent
                </div>
                <div id="dilutionError" class="error-message hidden" style="margin-top:1rem"></div>
            </div>
        </section>
    </main>

    <script src="script.js"></script>
</body>

</html>